{% extends 'base.html' %}
{% load i18n %} {% load l10n %}
{% load static %}

{% block title %}{% trans 'Roster' %}{% endblock %}

{% block script %}
    <script src="{% static 'js/roster.js' %}"></script>
    <script src="{% static 'js/modtimepicker.js' %}"></script>
{% endblock %}

<!-- =================== MODAL TIMEPICKER  =================== -->
{% include 'includes/modtimepicker.html' %}

<!-- SIDE BAR -->
{% block sidebar %}
    <nav id="id_sidebar" class="tsa_sidebar">
        <div class="sidebar_header">
            <h3>{% trans 'Roster' %}</h3>
        </div>
        <div class="tw_200 mx-2 mt-2 mb-4">
            <h6 class="tw_200 line_height_normal px-2">{% trans 'Period' %}:</h6>
            <input id="id_SBR_select_period"
                type="text"
                class="tw_200 border_none pointer_show px-2"
                readonly>
        </div>

        <div class="tw_200 mx-2 mt-2 mb-4">
            <h6 class="tw_200 line_height_normal px-2">{% trans 'Customer and order' %}:</h6>
            <input id="id_SBR_select_order"
                type="text"
                class="tw_200 border_none pointer_show px-2"
                readonly>
        </div>

        <div class="tw_200 mx-2 mt-2 mb-4">
            <h6 class="tw_200 line_height_normal px-2">{% trans 'Employee' %}:</h6>
            <input id="id_SBR_select_employee"
                type="text"
                class="tw_200 border_none pointer_show px-2"
                readonly>
        </div>

        <div class="tw_200 mx-2 mt-2 mb-4">
            <h6 class="tw_200 line_height_normal px-2">{% trans 'Absence' %}:</h6>
           <select id="id_SBR_select_absence"
                type="text"
                class="tw_200 border_none px-2"
                autocomplete="off" ondragstart="return false;" ondrop="return false;"
           ></select>
        </div>
        <div class="tw_200 mx-2 mt-2 mb-4">
            <h6 class="tw_200 line_height_normal px-2">{% trans 'Rest shifts' %}:</h6>
           <select id="id_SBR_select_restshift"
                type="text"
                class="tw_200 border_none px-2"
                autocomplete="off" ondragstart="return false;" ondrop="return false;"
           ></select>
        </div>
        <div class="tw_200 m-2">
            <h6 id="id_SBR_select_showall" class="tw_200 pointer_show line_height_normal px-2 py-1">{% trans 'Show all from this period' %}</h6>
        </div>
    </nav>
{% endblock %}
<!-- END SIDE BAR -->

{% block content %}

    {% if user.is_authenticated %}

<!-- =================== id_msgbox  =================== -->
        <div class="popup display_hide" >
            <span class="popuptext" id="id_msgbox"></span>
        </div>
<!-- =================== POPUP DATE  =================== -->
         <div id="id_popup_date_container" class="popup_box display_hide">
             <input id="id_popup_date" type="date" class="tsa_transparent mx-4 my-1" ></input>
         </div>
<!-- =================== MODAL STATUS  =================== -->
        <div class="modal " id="id_mod_status" tabindex="-1" role="dialog" aria-labelledby="id_modal_cont_label" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md " role="document">
                <div class="modal-content">

                    <div class="modal-header tsa_bc_lightlightgrey">
                        <h4 id="id_mod_status_header" class="modal-title mx-2" >{% trans 'Status' %}</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div  id="id_mod_status_body" class="modal-body">
                        <div class="modal_container">
                            <div class="modal_body_left">
                                <h6 class="modal-title mx-2" >{% trans 'Order' %}:</h6>
                            </div>
                            <div class="modal_body_right">
                                <h6 id="id_mod_status_order" class="modal-title mx-2" ></h6>
                            </div>
                        </div>
                        <div class="modal_container">
                            <div class="modal_body_left">
                                <h6 class="modal-title mx-2" >{% trans 'Employee' %}:</h6>
                            </div>
                            <div class="modal_body_right">
                                <h6 id="id_mod_status_employee" class="modal-title mx-2" ></h6>
                            </div>
                        </div>
                        <div class="modal_container">
                            <div class="modal_body_left">
                                <h6 class="modal-title mx-2" >{% trans 'Shift' %}:</h6>
                            </div>
                            <div class="modal_body_right">
                                <h6 id="id_mod_status_shift" class="modal-title mx-2" ></h6>
                            </div>
                        </div>
                         <div class="modal_container">
                            <div class="modal_body_left">
                                <h6 id="id_mod_status_time_label"class="modal-title mx-2" >{% trans 'Time' %}:</h6>
                            </div>
                            <div class="modal_body_right">
                                <h6 id="id_mod_status_time" class="modal-title mx-2" ></h6>
                            </div>
                        </div>

                        <div class="modal_container">
                            <div class="modal_body_left">
                                <div class="form-group">
                                    <label for="id_mod_status_note" class="mx-2 my-2">{% trans 'Notes' %}:</label>
                                    <input id="id_mod_status_note"
                                        type="textarea"
                                        autocomplete="off"
                                        ondragstart="return false;"
                                        ondrop="return false;"
                                        class="form-control">
                                </div>

                            </div>
                        </div>

                        <div class="modal_container">
                            <h6 id="id_mod_status_ftr_msg" class="modal-title mx-2"></h6>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button id="id_mod_status_btn_save" type="button" class="btn btn-primary">{% trans 'Confirm' %}</button>
                    </div>

                </div>
            </div>
        </div>
<!-- =================== MODAL CONFIRM  =================== -->
        {% include 'includes/confirm.html' %}
<!-- =================== MODAL PERIOD  =================== -->
        {% include 'includes/modselectperiod.html' %}
<!-- =================== MODAL ROSTERDATE  =================== -->
        {% include 'includes/modrosterdate.html' %}
<!-- =================== MODAL ROSTER ORDER  =================== -->
        {% include 'includes/modrosterorder.html' %}
<!-- =================== MODAL SELECT ORDER  ===================-->
        {% include 'includes/modselectorder.html' %}
<!-- =================== MODAL SELECT EMPLOYEE  ===================-->
        {% include 'includes/modselectemployee.html' %}
<!-- =================== MODAL SELECT SHIFT  ===================-->
        {% include 'includes/modselectshift.html' %}
<!-- =================== MODAL ROSTER EMPLOYEE  =================== -->
        {% include 'includes/modrosteremployee.html' %}

<!-- =================== CONTAINER =================== -->
        <div class="containerXX">

<!-- CONTENT HEADER - LOADER -->
            <div class="tsa_margin_top_48 mx-4">
            <!-- content_header -->
                <div class="content_header ">
                <!-- header_text -->
                    <div class="content_subheader_left mx-4">
                        <h5 id="id_hdr_period"></h5>
                    </div>
            <!-- loader -->
                    <div class="content_header_middle ">
                        <div id="id_loader" class="image_container visibility_hide">
                            <img src="{% static 'img/loader.gif' %}" height="24" width="24">
                        </div>
                    </div>
                </div>
            <!-- end content_header -->
            </div>
<!-- end CONTENT HEADER - LOADER -->

<!-- CONTENT BODY -->
            <div class="content_body mx-4">

<!-- =================== DATA TABLE  =================== -->
                 <div>
                    <table class="table tsa_tbl mx-4X my-1">
                        <thead id="id_tblHead_datatable"></thead>
                        <tbody id="id_tblBody_datatable"></tbody>
                    </table>
                </div>
  <!-- =================== END DATA TABLE  =================== -->
            </div>
<!-- END CONTENT BODY -->
        </div>
<!-- =================== END CONTAINER =================== -->

        <div id="id_data"
            data-imgsrc_inactive_black = "{% static 'img/inactive_black.png' %}"
            data-imgsrc_inactive_lightgrey = "{% static 'img/inactive_lightgrey.png' %}"
            data-imgsrc_inactive_grey = "{% static 'img/inactive_grey.png' %}"
            data-imgsrc_delete="{% static 'img/delete.gif' %}"
            data-imgsrc_deletered="{% static 'img/deletered.gif' %}"
            data-imgsrc_warning="{% static 'img/warning.gif' %}"
            data-imgsrc_questionmark="{% static 'img/questionmark.gif' %}"
            data-imgsrc_stat00="{% static 'img/stat00.png' %}"
            data-imgsrc_stat01="{% static 'img/stat01.png' %}"
            data-imgsrc_stat02="{% static 'img/stat02.png' %}"
            data-imgsrc_stat03="{% static 'img/stat03.png' %}"
            data-imgsrc_stat04="{% static 'img/stat04.png' %}"
            data-imgsrc_stat05="{% static 'img/stat05.png' %}"
            data-imgsrc_real03="{% static 'img/real03.png' %}"
            data-imgsrc_status="{% static 'img/status.png' %}"

            data-lang ="{{ lang }}"
            data-timezone ="{{ timezone }}"
            data-interval ="{{ interval }}"
            data-timeformat ="{{ timeformat }}"
            data-weekdays ="{{ weekdays }}"
            data-months ="{{ months }}"
            data-today ="{{ today }}"

            data-datalist_download_url="{% url 'datalist_download_url' %}"
            data-emplhour_download_url="{% url 'emplhour_download_url' %}"
            data-emplhour_upload_url="{% url 'emplhour_upload_url' %}"
            data-emplhour_fill_rosterdate_url="{% url 'emplhour_fill_rosterdate_url' %}"
            data-settings_upload_url="{% url 'settings_upload_url' %}"

            data-err_msg01= "{% trans 'An error occurred.' %}"

            data-txt_save = "{% trans 'Save' %}"
            data-txt_quicksave = "{% trans 'Quick save' %}"
            data-txt_quicksave_remove = "{% trans 'Exit Quick save' %}"

            data-txt_customer = "{% trans 'Customer' %}"
            data-txt_select_customer= "{% trans 'Select customer' %}"
            data-txt_select_customer_none= "{% trans 'No customers' %}"
            data-txt_order= "{% trans 'Order' %}"
            data-txt_select_order= "{% trans 'Select order' %}"
            data-txt_select_order_none= "{% trans 'No orders' %}"

            data-txt_date= "{% trans 'Date' %}"
            data-txt_scheme= "{% trans 'Scheme' %}"
            data-txt_scheme_add= "{% trans 'Add new scheme' %}"
            data-txt_cycle_once= "{% trans 'Once only' %}"

            data-txt_period= "{% trans 'Period' %}"
            data-txt_period_setting= "{% trans 'Period setting' %}"
            data-txt_period_all= "{% trans 'all' %}"

            data-txt_period_gotocurr= "{% trans 'Go to current period' %}"
            data-txt_period_gotonext= "{% trans 'Go to next period' %}"
            data-txt_period_gotoprev= "{% trans 'Go to previous period' %}"

            data-txt_range = "{% trans 'Range' %}"
            data-txt_rosterdate= "{% trans 'Rosterdate' %}"
            data-txt_rosterdate_fill = "{% trans 'Fill roster of' %}"
            data-txt_rosterdate_remove = "{% trans 'Remove roster of' %}"
            data-txt_of = "{% trans 'of' %}"
            data-txt_shift= "{% trans 'Shift' %}"

            data-txt_timestart= "{% trans 'Start time' %}"
            data-txt_timeend= "{% trans 'End time' %}"
            data-txt_breakhours= "{% trans 'Break hours' %}"
            data-txt_workinghours= "{% trans 'Working hours' %}"

            data-txt_employee = "{% trans 'Employee' %}"

            data-txt_datefirst= "{% trans 'Start date' %}"
            data-txt_datelast= "{% trans 'End date' %}"

            data-txt_hour= "{% trans 'hour' %}"
            data-txt_hours= "{% trans 'hours' %}"

            data-msg_overlap = "{% trans 'This shift overlaps an other shift of this employee' %}"
        >
        </div>

    {% else %}
        <div class="mx-4">
            <div class="alert alert-danger">{% trans "You don't have permission to view this page." %}</div>
        </div>
    {% endif %}
{% endblock %}